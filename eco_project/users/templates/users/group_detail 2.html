{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Group {{ group.code }}</title>
</head>
<body>
<h1>Group {{ group.code }}</h1>

{% if request.user == group.group_admin %}
    <button id="delete-group-btn">Delete Group</button>
{% endif %}

<h2>Members:</h2>
<ul>
    {% for user in group.users.all %}
        <li>
            {{ user.username }}
            {% if request.user == group.group_admin and user != group.group_admin %}
                <button class="remove-user-btn" data-user-id="{{ user.id }}">Remove</button>
            {% endif %}
        </li>
        {% empty %}
        <li>No members in this group.</li>
    {% endfor %}
</ul>

{% if request.user != group.group_admin %}
    <button id="leave-group-btn">Leave Group</button>
{% endif %}

<script>
    const deleteGroupUrl = "{% url 'users:delete_group' group.code %}";
    const removeUserUrl = "{% url 'users:remove_user' group.code %}";
    const groupHomeUrl = "{% url 'users:group_home' %}";
    const csrfToken = "{{ csrf_token }}";
    {% if request.user != group.group_admin %}
        const leaveGroupUrl = "{% url 'users:leave_group' group.code %}";
    {% endif %}
</script>
<script src="{% static 'js/group_detail.js' %}"></script>
</body>
</html>
